<div class="product-content-results-box product-contents">
  <h3 style="padding: 0px 40px 30px 40px;" class="uppercase"><span style="font-size: 100%;">PROVEN RESULTS USING FIXBIOME SYSTEM</span></h3>
      <div class="slider">
        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>95% of participants experienced other health benefits outside the gut using the FixBIOME course, like improved energy, better mood, better skin, or overall improvements in well-being.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>

        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>94% of participants agreed they experienced a decrease in bloating using the FixBIOME course.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>

        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>93% of participants agreed their bowel movements became more regular with the FixBIOME course.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>

        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>92% of participants said IBS symptoms reduced with the FixBIOME course.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>

        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>91% of participants experienced a decrease in stomach discomfort using the FixBIOME course.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>

        <div class="slide">
          <div class="slide-box">
            <div style="padding: 20px 0;">
              <p>69% of participants have experienced an improvement in food sensitivities using the FixBIOME course.</p>
              <p><em>*After six weeks results from independent in-home user trial on 41 women and men</em></p>
            </div>
          </div>
        </div>
        <!-- Add more slides as needed -->
      </div>
      <ol style="opacity: 0; visibility: hidden;" class="dots_navigation">
        <!-- Add more dots_navigation corresponding to each slide -->
      </ol>
      <div style="opacity: 0; visibility: hidden;" class="slider-controls">
        <button id="product_contents_prevBtn" class="control-button">❮</button>
        <button id="product_contents_nextBtn" class="control-button">❯</button>
      </div>
  </div>

  <style>
    .layout {
      max-width: 1020px;
      /* padding: 100px 40px 0 40px; */
      margin: auto;

      padding: 0 40px;
    }

    .product-content-slide {
      position: relative;
      overflow: hidden;
      width: 100%;
      margin: auto;
    }

    .product-content-slide .slider {
      width: 100%;
      display: flex;
      transition: transform 0.5s ease;
      overflow-x: unset;
      overflow-y: unset;
    }

    .product-content-slide .slide {
      /* flex: 0 0 100%; */
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .product-content-slide .slide a {
      width: 100%;
    }

    .product-content-slide .slide img {
      width: 100%;
      max-width: 100%;
      max-height: 100%;
      transition: transform 0.5s ease;
      cursor: pointer;
      /* Add cursor pointer to indicate clickable */
      transition: transform 0.3s ease;
    }

    .product-content-slide .dots_navigation {
      text-align: center;
      margin-top: 10px;
      padding: 0px;

    }

    .product-content-slide .Dots {
      display: inline-block;
      margin: 0 5px;
      cursor: pointer;
      width: 12px;
      height: 12px;
      background-color: #999393;
      border-radius: 50%;
    }

    .product-content-slide .dot-selected {
      background-color: #eaa794;
    }

    .product-content-slide .slider-controls {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      display: flex;
      justify-content: space-between;
      margin-top: -25px;
    }

    .product-content-slide .control-button {
      cursor: pointer;
      padding: 10px;
      background-color: transparent;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 35px;
      margin: 0 10px;
      transition: all 0.3s ease;
      color: rgb(153, 147, 147);
      font-weight: 100;
    }

    /* .control-button:hover {
    background-color: rgba(0, 0, 0, 0.7);
  } */
    .product-content-slide .control-button:hover {
      color: #eaa794;
    }

    .product-content-slide .slide-box {
      width: 100%;
      padding: 0 40px;
    }

    /* Responsive slides */
    @media (max-width: 599px) {

      /* Mobile styles */
      .product-content-slide .slide {
        width: 100%;
        /* Show one full slide */
        flex: 0 0 100%;
      }
    }

    @media (min-width: 600px) and (max-width: 899px) {

      /* Tablet styles */
      .product-content-slide .slide {
        width: 50%;
        /* Show half of a slide */
        flex: 0 0 50%;
      }
    }

    @media (min-width: 900px) {

      /* Desktop styles */
      .product-content-slide .slide {
        width: 33.3333%;
        /* Show one third of a slide */
        flex: 0 0 33.333%;
      }
    }

    .product-content-results-box .slider {
      display: flex;
      flex-wrap: wrap;
    }

    .product-content-results-box .slider .slide {
      width: 33.3333%;
    }

    .product-content-results-box .slider .slide .slide-box {
      padding-left: 20px;
      padding-right: 20px;
    }

    .product-contents {
      text-align: center;
    }

    .product-contents .slider {
      max-width: 1000px;
      margin: auto;
    }

    .product-contents em {
      font-size: 0.9em;
    }

  </style>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const slides = document.querySelectorAll(".product-description .slider-container .slide");
        const dots_navigation = document.querySelectorAll(".product-description .slider-container .Dots");
        let currentIndex = 0;
        let startX;

        function showSlide(index) {
            document.querySelector(".product-description .slider-container .slider").style.transform = `translateX(-${index * 100}%)`;
            resetDotsnailBorders();
            dots_navigation.forEach(dot => dot.style.backgroundColor = "#999393");
            // dots_navigation[index].style.backgroundColor = "#eaa794";
        }

        function resetDotsnailBorders() {
            dots_navigation.forEach(dot => {
                dot.style.borderColor = "transparent";
            });
        }

        function prevSlide() {
            currentIndex = currentIndex - 1;
            if (currentIndex < 0) {
                currentIndex = slides.length - 1;
            }
            showSlide(currentIndex);
        }

        function nextSlide() {
            currentIndex = currentIndex + 1;
            if (currentIndex >= slides.length) {
                currentIndex = 0;
            }
            showSlide(currentIndex);
        }

        dots_navigation.forEach((dot, index) => {
            dot.addEventListener("click", () => {
                showSlide(index);
            });
        });

        document.getElementById("prevBtn").addEventListener("click", () => {
            prevSlide();
        });

        document.getElementById("nextBtn").addEventListener("click", () => {
            nextSlide();
        });

        // Swipe Gesture
        document.querySelector(".product-description .slider-container").addEventListener("touchstart", touchStart);
        document.querySelector(".product-description .slider-container").addEventListener("touchmove", touchMove);

        function touchStart(e) {
            startX = e.touches[0].clientX;
        }

        function touchMove(e) {
            if (!startX) return;

            let endX = e.touches[0].clientX;
            let diffX = startX - endX;

            if (diffX > 0) {
                // Swiped left
                nextSlide();
            } else {
                // Swiped right
                prevSlide();
            }

            startX = null;
        }

        // Show the first slide initially
        showSlide(currentIndex);

    });

    const descAccordion = document.querySelectorAll(".desc-accordion");
    console.log(descAccordion);
    descAccordion.forEach((accordion) => {
        accordion.onclick = function () {
            this.classList.toggle("is-open");

            let content = this.nextElementSibling;

            if (content.style.maxHeight) {
                // If the accordion is open, close it
                content.style.maxHeight = null;
            } else {
                // If the accordion is currently closed, open it
                content.style.maxHeight = content.scrollHeight + "px";
            }
        };
    });

  function productContentSlide() {
        function getSlidesToShow() {
          // Determine how many slides to show based on window width
          if (window.innerWidth < 600) {
            return 1; // Mobile
          } else if (window.innerWidth >= 600 && window.innerWidth < 900) {
            return 2; // Tablet
          } else {
            return 3; // Desktop
          }
        }

        const slider = document.querySelector(".product-content-slide .slider");
        const slides = document.querySelectorAll(".product-content-slide .slide");
        let dotCount = Math.ceil(slides.length / getSlidesToShow());
        let html = "";
        for (let i = 0; i < dotCount; i++) {
          html += '<li class="Dots" data-index="' + i + '"></li>';
        }
        document.querySelector(".product-content-slide .dots_navigation").innerHTML = html;
        html = '';

        let dots_navigation = document.querySelectorAll(".product-content-slide .Dots");
        let currentIndex = 0;
        let startX;
        let cnt;
        let dotIndex = 1;

        function showSlide(ct, moveType) {
          // Update the slider translation based on slide width and current index
          let index = ct;
          const slideWidth = slider.clientWidth / getSlidesToShow();
          let maxSlideWidth = slides.length * slideWidth;
          if (maxSlideWidth - (slideWidth * getSlidesToShow()) < index * slideWidth) {
            if (moveType == "dot") {
              slider.style.transform = `translateX(-${(index - (slides.length % getSlidesToShow()) + 1) * slideWidth}px)`;
              resetDotColors(ct, "dot");
              return;
            }
            slider.style.transform = `translateX(-${0 * slideWidth}px)`;
            resetDotColors(ct, "");
            return;
          }
          console.log("dd", ct)
          slider.style.transform = `translateX(-${index * slideWidth}px)`;
          resetDotColors(ct, "");
        }


        function resetDotColors(ct, dt) {
          dots_navigation.forEach(dot => {
            dot.style.backgroundColor = "#999393";
          });

          if (dt == "dot") {
            dots_navigation[ct/getSlidesToShow()].style.backgroundColor = "#eaa794";
            return;
          }

          if (dt == "ed") {
            dots_navigation[dotCount - 1].style.backgroundColor = "#eaa794";
            return;
          }
          if (ct == 0) {
            dots_navigation[0].style.backgroundColor = "#eaa794";
          } else {
            if (ct % getSlidesToShow() == 0) {
              dots_navigation[ct / getSlidesToShow()].style.backgroundColor = "#eaa794";
              return;
            }
            if ((dotCount - 1) * getSlidesToShow() - 1 == ct) {
              console.log(ct, dotCount)
              dots_navigation[dotCount - 1].style.backgroundColor = "#eaa794";
              return;
            }
            dots_navigation[Math.ceil(ct / getSlidesToShow()) - 1].style.backgroundColor = "#eaa794";
          }
        }

        function prevSlide() {
          currentIndex = currentIndex - 1;
          if (currentIndex < 0) {
            currentIndex = slides.length - getSlidesToShow();
          }
          showSlide(currentIndex, "");
        }

        function nextSlide() {
          currentIndex = currentIndex + 1;
          if (currentIndex > slides.length - getSlidesToShow()) {
            currentIndex = 0;
          }
          showSlide(currentIndex, "");
        }

        dots_navigation.forEach((dot, index) => {
          dot.addEventListener("click", () => {
            showSlide(getSlidesToShow() * index, "dot");
          });
        });

        document.getElementById("product_contents_prevBtn").addEventListener("click", () => {
          prevSlide();
        });

        document.getElementById("product_contents_nextBtn").addEventListener("click", () => {
          nextSlide();
        });

        // Swipe Gesture
        document.querySelector(".product-content-slide").addEventListener("touchstart", touchStart);
        document.querySelector(".product-content-slide").addEventListener("touchmove", touchMove);

        function touchStart(e) {
          startX = e.touches[0].clientX;
        }

        function touchMove(e) {
          if (!startX) return;

          let endX = e.touches[0].clientX;
          let diffX = startX - endX;

          if (diffX > 0) {
            // Swiped left
            nextSlide();
          } else {
            // Swiped right
            prevSlide();
          }

          startX = null;
        }

        // Show the first slide initially
        showSlide(currentIndex, "");
        // Adjust the slide on window resize to handle media query changes
        window.addEventListener("resize", () => {
          dotCount = Math.ceil(slides.length / getSlidesToShow());
          html = "";
          for (let i = 0; i < dotCount; i++) {
            html += '<li class="Dots" data-index="' + i + '"></li>';
          }
          document.querySelector(".product-content-slide .dots_navigation").innerHTML = html;
          html = '';

          dots_navigation = document.querySelectorAll(".product-content-slide .Dots");
          showSlide(currentIndex, "");
          dots_navigation.forEach((dot, index) => {
            dot.addEventListener("click", () => {
              showSlide(getSlidesToShow() * index, "dot");
            });
          });
        });
      }

      let scrollWidth = window.innerWidth;
        if (scrollWidth < 576) {
          document.querySelector(".product-contents").classList.remove("product-content-results-box");
          document.querySelector(".product-contents").classList.add("product-content-slide");
          productContentSlide();
        } else {
          document.querySelector(".product-contents").classList.add("product-content-results-box");
          document.querySelector(".product-contents").classList.remove("product-content-slide");
        }

      window.addEventListener("resize", () => {
        let scrollWidth = window.innerWidth;
        if (scrollWidth < 576) {
          document.querySelector(".product-contents").classList.remove("product-content-results-box");
          document.querySelector(".product-contents").classList.add("product-content-slide");
          productContentSlide();
        } else {
          document.querySelector(".product-contents").classList.add("product-content-results-box");
          document.querySelector(".product-contents").classList.remove("product-content-slide");
        }
      });
</script>

{% schema %}
  {
    "name": "Product text slide",
    "settings": [],
    "presets": [{
        "name": "Product text slide",
        "category": "product"
      }]
  }
{% endschema %}

